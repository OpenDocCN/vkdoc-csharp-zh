# 1.游戏和游戏引擎

在这介绍性的一章中，我将谈一点关于游戏引擎的事情:它们是什么，以及为什么使用它们。我还将讨论几个具有历史意义的游戏引擎，并介绍 Unity 的高级功能。如果你想直接制作游戏，可以随意浏览或跳过这一章，以后再回来看。

## 游戏引擎——它们是什么？

游戏引擎是软件开发工具，旨在降低视频游戏开发所需的成本、复杂性和上市时间。这些软件工具在开发视频游戏的最常见任务之上创建了一个抽象层。抽象层被打包到工具中，这些工具被设计为可互操作的组件，可以直接替换或用其他第三方组件进行扩展。

游戏引擎通过减少制作游戏所需的知识深度，提供了巨大的效率优势。它们可以是预建功能最少的，也可以是全功能的，让游戏开发者可以完全专注于编写游戏代码。对于只想专注于尽可能做出最好游戏的单人开发者或团队来说，游戏引擎提供了一个超越从头开始的难以置信的优势。在构建本书中的示例游戏时，您不需要从头开始构建复杂的数学库，也不需要弄清楚如何在屏幕上呈现单个像素，因为创建 Unity 的开发人员已经为您完成了这些工作。

设计良好的现代游戏引擎在内部分离功能方面做得很好。游戏代码由描述玩家和库存的代码组成，与解压缩. mp3 文件并将其加载到内存中的代码分开保存。游戏代码将调用定义良好的引擎 API 接口来请求诸如“在这个位置绘制这个精灵”之类的事情。

一个设计良好的游戏引擎的基于组件的体系结构考虑到了鼓励采用的可扩展性，因为开发团队并不局限于一组预先确定的引擎功能。如果游戏引擎源代码不是开源的，或者许可费用非常昂贵，那么这种可扩展性就特别重要。Unity 游戏引擎是专为第三方插件而设计的。它甚至提供了一个包含插件的资产库，可以通过 Unity 编辑器访问。

许多游戏引擎也允许跨平台编译，这意味着你的游戏代码不局限于单个平台。该引擎通过不对底层计算机架构进行假设，并让开发人员指定他们使用的平台来实现这一点。如果你想发布你的游戏用于主机、桌面和移动设备，游戏引擎允许你切换几个开关来设置该平台的构建配置。

不过，对于跨平台编译的奇迹，也有一些警告。虽然跨平台编译是一项令人惊叹的功能，也证明了游戏技术的进步，但请记住，如果您正在为多个平台构建游戏，您需要提供不同的图像大小，并允许控件中的代码读取来接受不同类型的外围设备，如键盘。你可能需要调整游戏在屏幕上的布局以及许多其他任务。将一个游戏从一个平台移植到另一个平台实际上可能需要做很多工作，但是你可能不需要接触游戏引擎本身。

一些游戏引擎是如此的可视化，以至于他们允许不用写一行代码就能创建游戏。Unity 具有定制用户界面的能力，这些用户界面可以被开发团队的其他非程序员成员使用，例如关卡设计师、动画设计师、美术指导和游戏设计师。

有许多不同类型的游戏引擎，没有规则规定哪些功能是绝对需要的。最流行的游戏引擎包含以下部分或全部功能:

*   图形渲染引擎，支持 2D 或 3D 图形

*   支持碰撞检测的物理引擎

*   音频引擎加载和播放声音和音乐文件

*   实现游戏逻辑的脚本支持

*   定义游戏世界的内容和属性的世界对象模型

*   动画处理加载动画帧并播放它们

*   允许多人游戏、可下载内容和排行榜的网络代码

*   多线程允许游戏逻辑同时执行

*   内存管理，因为没有计算机有无限的内存

*   用于寻路和计算机对手的人工智能

如果你还没有完全接受使用游戏引擎，考虑下面的类比。

说你要盖房子。首先，这所房子将有一个混凝土地基，一个漂亮的木地板，坚固的墙壁，和一个风化处理的木屋顶。建造这座房子有两种方法:

### 建造房子的第一种方法

用手铲挖掘地面，直到你挖到足够的深度来种植地基。将石灰石和粘土放入窑中，在 2640 华氏度的温度下加热，研磨，并掺入少量石膏，制成混凝土。将你制作的粉末状混凝土，与水、碎石或细沙混合，然后打好地基。

在你打地基的同时，你需要钢筋来加固混凝土。收集制造钢筋所需的铁矿石，在高炉中熔炼，制成钢锭。将这些铝锭熔化并热轧成坚固的钢筋，用于混凝土基础。

之后，是时候搭建框架来悬挂墙壁了。拿起你的斧头，开始砍树。砍伐几百根左右的木材就足够供应原材料了，但是接下来你需要把每根木材加工成木材。完成后，别忘了处理木材，使其不受天气影响，不会腐烂或滋生昆虫。建造你的托梁和大梁，你将在上面铺设地板，你累了吗？我们才刚刚开始！

### 建造房子的第二种方法

购买袋装预拌混凝土、钢筋、从工厂加工的木材、一打纸带镀锌钉和气动钉枪。混合并浇注你的混凝土来建造你的地基，放下预制的钢筋，让混凝土凝固，然后用处理过的木材建造你的地板。

### 关于第一种方法

建造房子的第一种方法需要大量的知识，仅仅是创造建造房子所需的材料。这种方法要求你知道制造混凝土和钢材所需原材料的精确比例和技术。你需要知道如何砍伐树木而不被压在树下，你还需要知道处理木材所需的适当化学物质，你已经煞费苦心地将木材切割成数百根均匀的横梁。即使你拥有用这种方法建造房子所需的所有知识，它仍然会花费你数千个小时。

第一种方法类似于坐下来不使用游戏引擎来编写视频游戏。你必须从头开始做所有的事情:编写数学库、图形渲染代码、碰撞检测算法、网络代码、资产加载库、音频播放器代码等等。即使你一开始就知道如何做所有这些事情，你仍然需要花很长时间来编写游戏引擎代码并调试它。如果你不熟悉线性代数，渲染技术，以及如何优化剔除算法，你应该预料到，在你拥有足够的游戏引擎来实际开始编写游戏之前，你可能需要花费数年时间。

### 关于第二种方法

建造房子的第二种方式假设你不是完全从零开始。这并不要求你知道如何操作高炉，砍伐数百根木材，或者把它们磨成木材。第二种方法可以让你完全专注于建造房子，而不是制造建造房子所需的材料。如果你仔细选择材料并知道如何使用它们，你的房子会建造得更快，成本更低，而且质量可能更高。

第二种方法类似于坐下来编写一个视频游戏，并使用一个预建的游戏引擎。游戏开发者能够专注于游戏的内容，而不需要知道如何进行复杂的计算来判断两个物体在空中飞行时是否发生碰撞，因为游戏引擎会为他们完成这项工作。不需要构建资产加载系统、编写低级代码来读取用户输入、解压缩声音文件或解析动画文件格式。没有必要为所有视频游戏构建这种通用的功能，因为游戏引擎开发人员已经投入了数千小时来编写、测试、调试和优化代码来做这些事情。

### 总之…

游戏引擎给开发下一款热门游戏的独立开发者或大工作室团队带来的优势怎么强调都不为过。一些开发人员想要编写他们自己的游戏引擎作为编程练习，以了解一切是如何在引擎盖下工作的，他们将会学到大量的东西。但是如果你的目的是发布一款游戏，那么不使用预制的游戏引擎会给你自己带来伤害。

## 历史上的游戏引擎

历史上，游戏引擎有时与游戏本身紧密相关。1987 年，朗·吉尔伯特在芯片晨星公司的帮助下，在卢卡斯影业游戏公司工作时，为游戏引擎 *Maniac Mansion* 创建了脚本创建实用程序 SCUMM。SCUMM 是一个为特定的*类型*游戏定制的游戏引擎的很好的例子。SCUMM 中的“MM”代表*狂魔大厦*，这是一款广受好评的冒险游戏，也是第一款使用点击式界面的游戏，Gilbert 也发明了这款游戏。

SCUMM 游戏引擎负责将由人类可读的符号化单词组成的脚本(如“步行字符到门”)转换为字节大小的程序，以供游戏引擎解释器读取。翻译负责控制屏幕上游戏的演员，并呈现声音和图形。编写游戏而不是编码的能力，促进了快速原型制作，并允许团队从早期阶段就开始构建并专注于游戏。虽然 SCUMM 引擎是专门为*狂人大厦*(图 [1-1](#Fig1) )开发的，但它也用于其他热门游戏，如*全速*、*猴岛的秘密、印第安纳琼斯和最后的远征:图形冒险*等。

![../images/464283_1_En_1_Chapter/464283_1_En_1_Fig1_HTML.jpg](../images/464283_1_En_1_Chapter/464283_1_En_1_Fig1_HTML.jpg)

图 1-1

卢卡斯影业游戏公司出品的 Maniac Mansion 使用了 SCUMM 引擎

与 Unity 等现代游戏引擎相比，SCUMM 引擎缺乏很大的灵活性，因为它是为点击式游戏定制的。然而，像 Unity 一样，SCUMM 引擎允许游戏开发者专注于游戏性，而不是不断地为每个游戏重写图形和声音代码，从而节省了大量的时间和精力。

有时候游戏引擎会对整个行业产生巨大的影响。1991 年年中，一家名为 id Software 的公司发生了行业内的巨大转变，当时 21 岁的约翰·卡马克为一款名为 *Wolfenstein 3D* 的游戏开发了一个 3D 游戏引擎。在此之前，3D 图形通常仅限于缓慢移动的飞行模拟游戏或简单多边形游戏，因为可用的计算机硬件太慢，无法计算和显示快节奏 3D 动作游戏所需的表面数量。卡马克能够通过使用一种叫做*光线投射*的图形技术来解决当前的硬件限制。这允许通过计算和显示玩家可见的表面而不是玩家周围的整个区域来快速显示 3D 环境。

这种独特的方法让卡马克与约翰·罗梅洛、设计师汤姆·霍尔和艺术家阿德里安·卡马克一起创作了一款暴力、快节奏的关于打倒纳粹的游戏，这催生了第一人称射击游戏(FPS)类型的视频游戏。id Software 将 Wolfenstein 3D 引擎授权给了其他几款游戏。迄今为止，他们已经生产了七款游戏引擎，这些引擎已经被用于一些有影响力的游戏，如*雷神之锤 III 竞技场*、*末日*重启和*沃尔芬斯坦 II:新巨人*。

如今，构建一个粗略的 3D FPS 游戏原型是一个有经验的游戏开发人员可以使用 Unity 这样强大的游戏引擎在几天内完成的事情。

## 当今的游戏引擎

现代的 AAA 游戏开发工作室，如 Bethesda 游戏工作室和暴雪娱乐公司通常有自己的内部专有游戏引擎。Bethesda 的内部游戏引擎名为:Creation Engine，用于创建*上古卷轴 V:天际*以及*辐射 4* 。暴雪有自己专有的游戏引擎，用于制作游戏，如《T4》、《魔兽世界》和《守望先锋》。

专有的内部游戏引擎可能开始时是为特定的游戏项目而构建的。项目发布后，游戏引擎通常会在游戏工作室的下一个游戏中重新使用时获得新生。该引擎可能需要升级以保持最新并利用最新技术，但它不需要从头开始重建。

如果游戏开发公司没有内部引擎，他们通常会使用开源引擎，或者授权第三方引擎，如 Unity。如今，在不使用游戏引擎的情况下创建一个重要的 3D 游戏将是一项极其艰巨的任务——无论是在经济上还是在技术上。事实上，拥有内部游戏引擎的游戏工作室需要独立的编程团队，完全致力于构建引擎功能并优化它们。

说了这么多，为什么一个 AAA 工作室选择不使用像 Unity 这样的游戏引擎，而是选择建立自己的内部引擎？像 Bethesda 和 Blizzard 这样的公司有大量现成的代码可以利用，还有财政资源和大量才华横溢的程序员。对于某些类型的项目，他们希望完全控制游戏和游戏引擎的每个方面。

尽管比典型的小型游戏工作室有这些优势，Bethesda 仍然使用 Unity 来开发手机游戏:*辐射避难所*；而暴雪用 Unity 开发了一个小小的跨平台收藏卡牌游戏:炉石。当时间等于金钱时，像 Unity 这样的游戏引擎可以用来快速原型化、构建和迭代功能。如果你的计划是在多个平台上发布一款游戏，那么时间=金钱的等式就显得尤为重要。将内部引擎移植到 iOS 和 Android 等特定平台可能非常耗时。如果一个项目不需要你在开发像 *Overwatch* 这样的游戏时所需要的对游戏引擎的相同级别的控制，那么使用像 Unity 这样的交叉兼容的游戏引擎是显而易见的。

## Unity 游戏引擎

Unity 是一款非常受欢迎的游戏引擎，与当今市场上的其他游戏引擎相比，它提供了大量的优势。Unity 提供了一个具有拖放功能的可视化工作流程，并支持用 C#编写脚本，这是一种非常流行的编程语言。Unity 长期以来一直支持 3D 和 2D 图形，并且每一个版本的工具集都变得更加复杂和用户友好。

Unity 有几层许可证，对于收入高达 10 万美元的项目是免费的。它为 27 种不同的平台提供跨平台支持，并利用特定于系统架构的图形 API，包括 Direct3D、OpenGL、Vulkan、Metal 和其他几个。Unity Teams 提供基于云的项目协作和持续集成。

自 2005 年首次亮相以来，Unity 已被用于开发数以千计的桌面、移动和主机游戏和应用程序。这些年来 Unity 开发的一些知名游戏的小样本包括:*Thomas Alone*(2010)*Temple Run*(2011)*The Room*(2012)*rim world*(2013)*炉石*(2014)*Kerbal Space Program*(2015)*pokémon GO*(2014)

![../images/464283_1_En_1_Chapter/464283_1_En_1_Fig2_HTML.jpg](../images/464283_1_En_1_Chapter/464283_1_En_1_Fig2_HTML.jpg)

图 1-2

由 StudioMDHR 开发的 Cuphead 使用了 Unity 游戏引擎

对于想要定制工作流程的游戏开发者来说，Unity 提供了扩展默认可视化编辑器的能力。这种极其强大的机制允许创建定制工具、编辑器和检查器。想象一下，为你的游戏设计者创建一个可视化工具，轻松调整游戏中对象的值，如角色类别的生命值、技能树、攻击范围或物品掉落，而不必进入代码并修改值或使用外部数据库。Unity 提供的编辑器扩展功能使这一切变得可能和简单。

Unity 的另一个优势是 Unity 资产商店。资产商店是一个在线店面，艺术家、开发人员和内容创作者可以在这里上传内容进行买卖。资产商店包含数以千计的免费和付费的编辑器扩展、模型、脚本、纹理、着色器等，团队可以使用它们来加快开发进度并增强最终产品。

## 摘要

在这一章中，我们了解了使用预制游戏引擎比自己编写游戏引擎有很多优势。我们谈到了几个有趣的游戏引擎，以及它们对整个游戏开发的影响。我们还概述了 Unity 提供的具体优势，并提到了一些使用 Unity 引擎开发的更知名的游戏。也许很快有一天，有人会提到你的游戏，说它是用 Unity 制作的最著名的游戏之一！