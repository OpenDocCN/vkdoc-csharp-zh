# 2.入门指南

希望你可能已经对增强现实(或 AR)有了一个很好的想法。由于对虚拟现实(或 VR)、增强现实和混合现实之间的区别存在一些混淆，我认为可能值得尝试澄清我在本书中提到的 AR 的意思。

虚拟现实(VR)是一种计算机生成的环境，通过感官和感知来模拟体验。与传统的计算机系统不同，虚拟现实系统将用户置于一种体验之中。用户沉浸其中，能够与 3D 世界互动，而不是观看他们面前的屏幕。

现在，我们来看看增强现实(AR)。普遍的共识是，AR 被定义为真实世界环境的直接实时视图，其元素由计算机生成的信息“增强”。VR 和 AR 的关键区别在于 AR 包含了真实环境的**实景**。VR 系统通常不包括真实环境的实时视图。VR 头戴式耳机是完全封闭的，显示器完全由计算机生成。

混合现实(MR，虽然缩写很少使用)，是微软用来区分他们的 HoloLens 的一个术语。我感觉混合现实是 AR 的另一种形式。然而，对此仍有一些争论。当我问我在微软的好朋友时，他们觉得混合现实介于 AR 和 VR 之间，并将数字对象完全融入你的世界，使它们看起来好像真的在那里。

你可能会惊讶，VR 和 AR 这两个术语已经存在很多年了。虽然对术语 VR 的首次使用有相当多的争论(主要是由于对该术语的一致定义)，但有一些普遍的共识，即该术语首次使用是在 20 世纪 50 年代左右，当时作者指的是完全沉浸式系统或环境。在整个美国军方和 NASA，飞机制造商将 AR 系统用于培训、研究和开发。然而，直到 2016 年，我们才看到第一个商用的消费级 AR 系统 Oculus Rift。Occulus Rift 由 Oculus VR 制造(最终被脸书以 20 亿美元收购)。

AR 的提法也提了很多年了。难以就第一次提及 AR 达成一致也是由于对 AR 的定义达成一致。1989 年，乔治·道格拉斯写了一个计算机驱动的天文望远镜制导和控制系统，该系统具有叠加的星域和天体坐标图形显示，似乎是第一个 ar 系统。

最近，AR 领域有了一些有趣的发展。虽然有一些专有系统，但第一个最引人注目的发展是为 Android 和 iOS 手机推出了 Pokémon Go。使用手机的地理定位功能和集成摄像头，用户能够在屏幕上看到一个虚拟物体，就像在现实世界中一样。

在这本书里，我将专注于为 iOS 开发一款 AR 游戏。我选择 iOS 有很多原因。首先，使用 iOS 的设备非常多。更重要的是，苹果正在硬件和软件两方面投资 AR 开发。苹果在 iOS 11 中加入了 ARKit。ARKit 让我们可以轻松地创建 AR 游戏和模拟，将虚拟对象放入用户的环境中。通过结合设备运动传感器的信息和摄像头的数据，ARKit 可以帮助 iPhone 或 iPad 分析周围环境。苹果还增强了 iPhone 8 和 iPhone X 的摄像头功能。iPhone 8 和 iPhone X 的摄像头设计用于在弱光下拍摄 60 帧/秒的视频。iPhone X 上的双光学图像稳定和 iPhone 8 上改进的光学图像稳定也提供了改进的视觉清晰度。这些硬件和软件功能有助于让游戏在用户环境中显得更加自然。苹果也在大力投资改善他们未来 iPhones 和 iPads 的 AR 功能。

Unity 最近在 Unity 商店推出了 Unity ARKit。这让我们制作 iOS 版 AR 游戏变得容易了很多。因此，在本书中，我将使用 Unity ARKit。所以现在是安装最新版本的 Unity ARKit 的好时机。Unity ARKit 的最低要求如下:

*   支持 ARKit 并拥有最新版本 iOS 11.3 或更高版本的 iOS 设备。

*   装有 macOS 10.13 (High Sierra)或更高版本的 Mac。

*   Unity 版本 2017.1 或更高版本。

*   苹果开发者网站最新版本的 XCode 9.3(或更高版本)(需要 macOS 10.13)。

现在你已经安装了 Unity，是时候熟悉 Unity ARKit 的各种元素了，我们将用它来制作和测试我们的游戏。当我们探索 Unity ARKit 的不同组件时，我将讨论开发 AR 游戏的一些技术原理。由于这是一本入门书，所以我不会太深入技术细节，尽量保持这个相对较高的水平。我的编辑问我关于额外的 AR 书籍的建议，所以我可能会为关于 AR 的第二本书保留更高级或更技术的内容。

现在让我们启动 Unity 并创建一个新项目。

当您启动 Unity 时，您将看到项目屏幕(图 [2-1](#Fig1) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig1_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig1_HTML.jpg)

图 2-1

Unity 项目屏幕

选择屏幕右上角的新图标。这将打开 Unity 新项目屏幕(图 [2-2](#Fig2) )。在对话框中，键入项目名称，设置 Unity 文件的位置，键入您的组织名称，并将模板设置为 3D。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig2_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig2_HTML.jpg)

图 2-2

Unity 新项目屏幕

在 Unity 新项目屏幕的对话框中，输入项目名称，选择要保存该文件的位置，并选择创建项目图标(图 [2-2](#Fig2) )。我选择了 AR 项目作为文件名，并选择了硬盘上的用户文件夹。

现在 Unity 将打开一个空白的 Unity 项目(图 [2-3](#Fig3) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig3_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig3_HTML.jpg)

图 2-3

空白的 Unity 项目屏幕

## 安装 Unity ARKit

现在是安装 Unity ARKit 的最佳时机。要从 Unity 商店安装 Unity ARKit，您需要访问 Unity 资产商店。可以通过多种方式访问 Unity Asset Store。在 Unity 屏幕的主窗口中，有一个资产存储选项卡，这将调出资产存储窗口。此窗口也可以通过使用命令按钮和 9 (⌘+9).)来访问要从资产商店下载资源，您需要向 Unity 注册以创建一个 Unity ID。创建 Unity ID 后，在 Unity Asset Store 窗口中会出现一个搜索栏。在搜索栏 ARKit 中键入，这将显示符合该搜索标准的文件列表(图 [2-4](#Fig4) )。Unity 中的默认窗口设置将显示最小化的 Unity 商店窗口；要以全屏模式查看资产存储，屏幕右上角有一个下拉菜单。选择此项，然后用鼠标左键单击。这将显示屏幕选项，重新加载，最大化，关闭标签，并添加标签。选择最大化选项(单击鼠标左键)。在屏幕的顶部，有几个过滤器选项。在筛选选项下面，将会有符合您的搜索标准的资产。双击 ARKit，这将加载该资产的屏幕。选择导入按钮，该资产将被导入到 Unity 中(图 [2-5](#Fig5) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig5_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig5_HTML.jpg)

图 2-5

场景文件夹中带有 ARKit 的 Unity 项目文件夹

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig4_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig4_HTML.jpg)

图 2-4

统一资产商店

## 编辑器布局

现在是时候仔细看看 Unity 编辑器的布局了。主窗口分为多个面板。区域的默认显示视图(出厂设置)通过单击视图的选项卡来选择。视图可以被添加、移动、删除和调整大小，并且编辑器支持在布局之间切换，所以布局本质上是视图的特定排列。比如主窗口的默认布局(图 [2-6](#Fig6) )有一个包含场景视图(图 [2-7](#Fig7) )和游戏视图(图 [2-8](#Fig8) )的区域。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig8_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig8_HTML.jpg)

图 2-8

在多标签区域中选择的游戏视图

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig7_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig7_HTML.jpg)

图 2-7

在多标签区域中选择的场景视图

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig6_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig6_HTML.jpg)

图 2-6

Unity 编辑器的默认布局

### 预设布局

默认布局只是几种预设布局中的一种。可从主窗口右上角的菜单中选择替代布局(图 [2-9](#Fig9) )。Unity 还使我们能够创建自己的布局。在图 [2-9](#Fig9) 中，你会看到我的菜单中有一个手机游戏配置。这是我在创作手机游戏时创建的自定义布局。看看你菜单上的各种布局。图 [2-6](#Fig6) 至 [2-7](#Fig7) 显示了最终布局。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig9_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig9_HTML.jpg)

图 2-9

布局菜单

我将很快更详细地描述各种类型的视图，但现在，请注意 2 乘 3 布局(图 [2-10](#Fig10) )是场景视图和游戏视图位于不同区域而不是共享同一区域的布局示例。4 分割布局(图 [2-11](#Fig11) )有四个场景视图实例，表明布局并不局限于每种类型的视图。高大布局(图 [2-12](#Fig12) )提供了人像场景视图。宽阔的布局(图 [2-13](#Fig13) )提供了一个景观场景视图。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig13_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig13_HTML.jpg)

图 2-13

宽阔的布局

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig12_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig12_HTML.jpg)

图 2-12

高大的布局

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig11_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig11_HTML.jpg)

图 2-11

4 分割布局

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig10_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig10_HTML.jpg)

图 2-10

2 乘 3 布局

### 自定义布局

预设布局提供了各种工作空间，但幸运的是，您并不局限于使用它们。Unity 提供了完全重新排列编辑器窗口的灵活性。

#### 调整区域大小

首先，在尝试各种预设布局时，您可能会注意到一些区域太窄，例如，在宽布局的左侧面板中(图 [2-13](#Fig13) )。幸运的是，您可以单击某个区域的边界并拖动它来调整该区域的大小。

#### 移动视图

更酷的是，你可以四处移动视图。将视图的选项卡拖到另一个选项卡区域会将视图移动到那里。并且将标签拖动到“停靠”区域将创建一个新区域。例如，从默认布局开始，将“检查器”标签拖到“层次”标签的右侧。现在，检查器视图与层次视图共享相同的区域。结果应该如图 [2-14](#Fig14) 所示。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig14_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig14_HTML.jpg)

图 2-14

移动视图后定制的工作空间

#### 分离视图

您甚至可以将一个视图拖到编辑器窗口之外，以便它驻留在自己的“浮动”窗口中，可以像对待任何其他区域一样对待它。将场景选项卡拖到编辑器外，使其驻留在一个浮动窗口中，然后将游戏选项卡拖到其选项卡区域中。结果应该如图 [2-15](#Fig15) 所示。类似地，将标签拖动到浮动窗口的停靠区域将向窗口添加另一个区域。

### 小费

我喜欢将游戏视图分离到一个浮动窗口中，因为我通常在编辑器中工作时不需要看到它，直到我点击播放，这允许我最大化游戏视图以填满整个屏幕。我也喜欢和不止一个显示器一起工作。这样，我可以最大化我的屏幕空间。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig15_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig15_HTML.jpg)

图 2-15

新视图列表

浮动窗口经常被其他窗口覆盖，所以菜单栏上的窗口菜单有使每个视图可见的菜单项。注意，每一个都有一个键盘快捷键，还有一个布局子菜单，与编辑器中的布局菜单相同。

#### 添加和删除视图

您还可以使用区域右上角的菜单添加和删除每个区域中的视图(图 [2-15](#Fig15) )。“关闭”选项卡项目删除当前显示的视图。“添加”选项卡项目提供了一个新视图列表供您选择。

您可能希望不同的目标平台有不同的布局，或者开发和测试有不同的布局，甚至不同的游戏有不同的布局。例如，我有一个专门为我的手机游戏定制的布局，以合适的纵向纵横比预先保存游戏视图。每次启动 Unity 时手动重新配置编辑器会很麻烦。幸运的是，您可以通过选择布局菜单中的保存布局选项来命名和保存布局，这将提示您输入新的布局名称(图 [2-16](#Fig16) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig16_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig16_HTML.jpg)

图 2-16

提示新布局

保存后，新布局将在布局菜单中列出，如果选择删除布局，还会在可供删除的布局列表中列出(图 [2-17](#Fig17) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig17_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig17_HTML.jpg)

图 2-17

布局的删除菜单

如果您弄乱或删除了原始布局，您可以在区域菜单中选择恢复出厂设置选项(图 [2-18](#Fig18) )。这也将删除任何自定义布局。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig18_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig18_HTML.jpg)

图 2-18

恢复原始布局设置

如果您更改了一个布局并且没有保存更改，您可以通过在布局菜单中重新选择该布局来放弃更改。

## 检查员视图

首先要详细描述的最佳视图是 Inspector 视图，因为它的功能是显示有关在其他视图中选择的对象的信息。它不仅仅是一个检查器，因为它通常可以用来修改选中的项目。

检查员视图也用于显示和调整可在编辑菜单中调出的各种设置(图 [2-19](#Fig19) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig19_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig19_HTML.jpg)

图 2-19

调出编辑器设置

“检查器”视图显示编辑器设置。如果项目当前有元文件，则版本控制模式设置为元文件(如果您使用资产服务器，则此选项设置为资产服务器)。要隐藏图元文件，将版本控制模式设置为隐藏(图 [2-20](#Fig20) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig20_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig20_HTML.jpg)

图 2-20

检查器视图中的编辑器设置

当版本控制模式设置为禁用时，Unity 将删除元文件。现在，资产跟踪是在项目的 Library 文件夹中的二进制文件中处理的。

### 注意

使用元文件进行版本控制支持的 Unity 用户也可以选择将资产序列化模式设置为强制文本。在这种模式下，Unity 场景文件以纯文本 YAML (YAML 不是标记语言)格式保存。

通常，检查器视图显示最近选择的对象的属性(当您调出编辑器设置时，您实际上选择了它)。但有时您不想在选择其他对象时更改检查器视图。在这种情况下，您可以通过选择视图右上角菜单中的锁定选项将检查器视图锁定到一个对象(图 [2-21](#Fig21) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig21_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig21_HTML.jpg)

图 2-21

锁定检查器视图

## 项目视图

虽然检查器视图可以被认为是编辑器中最低级别的视图，因为它只显示单个对象的属性，但是项目视图可以被认为是最高级别的视图(图 [2-22](#Fig22) )。项目视图显示游戏可用的所有资源，从单个模型、纹理和脚本到包含这些资源的场景文件。所有项目资源都是位于项目的“资源”文件夹中的文件(因此您可能希望将项目视图视为“资源”视图)。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig22_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig22_HTML.jpg)

图 2-22

项目视图的顶层

### 在一列和两列之间切换

在几个旧版本的 Unity 中，项目视图只有一列显示。该选项在项目视图的菜单中仍然可用(单击视图右上角的小三线图标)，因此您现在可以在一列和两列之间切换。

### 缩放图标

底部的滑块缩放右侧面板中的视图——较大的比例适合纹理，较小的比例适合没有有趣图标的脚本等项目。这是按资源类型划分资源的一个很好的理由(即，将所有纹理放在一个纹理文件夹中，将脚本放在一个脚本文件夹中，等等)。很有可能，单一比例的滑块设置对混合的资产类型并不好。

### 检查资产

选择右侧的资产将在检查器视图中显示该资产的属性。例如，如果您选择一个动画样本，检查器视图会显示有关动画的信息，其中一些信息您可以更改，如持续时间，它甚至允许您在编辑器中播放动画(图 [2-23](#Fig23) )。我们将在后面的章节中讨论改变资产属性，但是现在可以在项目视图中随意选择各种类型的资产，看看在检查器视图中显示了什么。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig23_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig23_HTML.jpg)

图 2-23

在项目视图中检查选定的资产

### 搜索资产

在大型复杂的项目中，很难手动搜索特定的资产。幸运的是，就像在 Finder 中一样，有一个搜索框可以用来过滤显示在项目视图右侧面板中的结果。在图 [2-24](#Fig24) 中，项目视图显示了搜索名称中带有“add”的资产的结果。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig24_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig24_HTML.jpg)

图 2-24

搜索名称中带有“添加”的资产

右侧面板显示“资产”下所有内容的搜索结果(即我们的所有资产)。通过选择左侧面板中的一个子文件夹，可以进一步缩小搜索范围。例如，如果您知道您正在查找一个场景，并且您已经按照资源类型将资源排列到子文件夹中，则可以选择要搜索的文件夹。在图 [2-25](#Fig25) 中，我已经在 examples 文件夹中搜索了文件名中带有 add 的任何资产。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig25_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig25_HTML.jpg)

图 2-25

在特定文件夹中搜索资产

注意就在搜索的下面；有一个以所选文件夹名称命名的选项卡。您仍然可以单击左侧的“资产”选项卡来查看您所有资产的搜索结果，包括本地资产和 Unity 资产商店上的资产，我们将在本书中多次使用这些资产。

您还可以使用搜索框右侧的菜单，按资产类型筛选您的搜索。您可以选择场景作为感兴趣的资产类型，而不是只在示例文件夹中进行搜索(图 [2-26](#Fig26) )。请注意这是如何导致被添加到搜索框中的。前缀 t:表示搜索应该按照以下资产类型进行筛选。你可以不用菜单直接输入。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig26_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig26_HTML.jpg)

图 2-26

按资产类型筛选的搜索

“资产类型”菜单右侧的按钮用于按标签过滤(您可以在“检查器”视图中为每个资产分配一个标签)，这对于搜索资产存储也非常方便。最右边的星号按钮将在左侧面板的收藏夹部分保存当前搜索。

### 经营资产

项目视图中的资源可以像 Finder 中的相应文件一样进行操作。

双击资产将尝试打开合适的程序来查看或编辑该资产。这相当于右键单击资产并选择打开。双击场景文件将在 Unity 编辑器窗口中打开场景，就像您在文件菜单中选择了打开场景一样。

您还可以像在 Finder 中一样给文件重新命名、复制和删除，以及将文件拖入和拖出文件夹。有些操作可在 Unity 编辑菜单和右键单击资源时的弹出菜单中找到。在接下来的几章中，你会得到一些练习。

同样，在下一章中，您将向项目中添加资产。这包括导入文件或导入 Unity 包，使用菜单栏上的“资源”菜单，或者使用 Finder 将文件拖到项目的“资源”文件夹中。

## 层级视图

每个游戏引擎都有一个顶级对象，称为*游戏对象*或*实体*，用来表示任何具有位置、潜在行为和名称的事物。Unity 游戏对象是 GameObject 类的实例。

### 注意

总的来说，当我们提到一种类型的 Unity 对象时，我们将使用它的类名来精确地说明在脚本中如何引用该对象。

层次视图是当前场景的另一种表示。虽然场景视图是场景的 3D 表示，您可以像使用内容创建工具一样在其中工作，并且游戏视图显示玩游戏时的场景，但层次视图在一个易于导航的树结构中列出了场景中的所有游戏对象。

### 检查游戏对象

当你在层次视图中点击一个游戏对象时，它会成为当前的编辑器选择，并且它的组件会显示在编辑器中。每个 GameObject 都有一个 Transform 组件，它指定了它在层次中相对于其父对象的位置、旋转和缩放(如果您熟悉 3D 图形的数学，则该 Transform 本质上是对象的变换矩阵)。一些组件为游戏对象提供功能(例如，灯是附加有灯组件的游戏对象)。其他组件引用网格、纹理和脚本等资源。图 [2-27](#Fig27) 显示了主相机游戏对象的组件(在层级视图中，游戏对象的整个玩家树显示为蓝色，因为它链接到一个预设，一种特殊类型的资产，用于克隆一个游戏对象或一组游戏对象)。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig27_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig27_HTML.jpg)

图 2-27

层次视图和检查器视图

### 父子游戏对象

你会发现许多游戏对象被安排在一个层次结构中，这就是这个视图的名字。对于概念上组合在一起的游戏对象来说，父子关系是有意义的。例如，当您要移动一辆汽车时，您希望车轮自动随汽车一起移动。因此，车轮应该被指定为汽车的子件，从汽车的中心偏移。当车轮转动时，它们相对于汽车的运动而转动。养育还允许我们一次激活或停用整组游戏对象。

## 场景视图

虽然层级视图允许我们在当前场景中创建、检查和修改游戏对象，但是它没有给我们一种可视化场景的方法。这就是场景视图的用武之地。场景视图类似于 3D 建模应用程序的界面。它允许您从任何 3D 有利位置检查和修改场景，并让您了解最终产品的外观。

### 浏览场景

如果你不熟悉在 3D 空间工作，这是在 2D 工作的直接延伸。在 3D 空间中，您有一个额外的 z 轴和(x，y，z)坐标，而不仅仅是在具有 x 和 y 轴和(x，y，z)坐标的空间中工作。x 轴和 z 轴定义地平面，y 轴指向上方(可以将 y 视为高度)。

### 注意

一些 3D 应用程序和游戏引擎使用 z 轴表示高度，x 轴和 y 轴表示地平面，因此在导入资源时，您可能需要调整(旋转)它们。

3D 空间中的视点通常称为*相机*。单击右上角的多色场景 Gizmo 的 x、y 和 z 箭头是一种快速翻转相机的方法，使其面向相应的轴。例如，单击 y 箭头会给你一个自上而下的场景视图(图 [2-28](#Fig28) )，场景 Gizmo 下的文本显示“顶部”

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig28_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig28_HTML.jpg)

图 2-28

场景视图中的俯视图

这里的相机与游戏中使用的场景中的相机游戏对象不同，所以当你在场景视图中四处查看时，你不必担心弄乱游戏。

为了演示如何使用导航工具，我从项目文件夹中选择了玩家游戏对象，并将其拖动到层次视图中。

单击场景 Gizmo 中心的框可以在透视之间切换相机投影，当对象远离时，会将对象渲染得更小；和“正交”( orthographic ),无论远近，都以原始大小呈现。透视更真实，也是你通常在游戏中使用的，但是正投影在设计时通常更方便(因此它在计算机辅助设计应用中无处不在)。场景 Gizmo 下文本前面的小图形表示当前投影。

您可以使用鼠标滚轮进行放大和缩小，也可以选择编辑器窗口右上角工具栏中的手形工具，按住 Control 键的同时单击并拖动鼠标。当选择手形工具时，你也可以通过点击拖动视图来移动相机，并且你可以通过按住 Option(或 Alt)键拖动鼠标来旋转(环绕)相机，这样你就不仅仅局限于轴相机角度，如图 [2-29](#Fig29) 所示。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig29_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig29_HTML.jpg)

图 2-29

场景视图中的倾斜透视

请注意，当你从任意角度观看时，场景 Gizmo 下的文本显示 Persp 或 Iso，这取决于你使用的是透视还是正交投影(Iso 是 isometric 的缩写，是星际争霸等游戏中常见的倾斜正交视图)。

工具栏上的其他按钮激活移动、旋转和缩放游戏对象的模式。目前没有理由更改它们，所以当您开始创建新项目时，将会更详细地解释这些模式。

### 小费

如果不小心更改了场景，可以从“编辑”菜单中选择“撤消”。如果你做了很多不想保留的修改，当你切换到另一个场景或退出 Unity 时，你可以拒绝保存这个场景。同时，请注意，在这些模式下，您仍然可以使用交替的键盘和鼠标组合来移动摄像机。表 [2-1](#Tab1) 列出了所有可能的选项。

表 2-1

可用的场景视图相机控件

<colgroup><col class="tcol1 align-left"> <col class="tcol2 align-left"> <col class="tcol3 align-left"> <col class="tcol4 align-left"> <col class="tcol5 align-left"></colgroup> 
| 

行动

 | 

手工工具

 | 

单键鼠标或触控板

 | 

2 键鼠标

 | 

三键鼠标

 |
| --- | --- | --- | --- | --- |
| 移动 | 单击并拖动 | 按住 Alt-Command 键并点按拖移 | 按住 Alt 键并单击拖动 | 按住 Alt 键并单击鼠标中键拖动 |
| 轨道 | 按住 Alt 键并单击拖动 | 按住 Alt 键并单击拖动 | 按住 Alt 键并单击拖动 | 按住 Alt 键并单击拖动 |
| 一款云视频会议软件 | 按住 Control 键并点按拖移 | 按住 Control 键并点按拖移或双指扫动 | 按住 Alt 并右键单击拖动 | 按住 Alt 并右键单击拖动或滚轮 |

还有一些其他方便的基于键盘的场景导航功能。按箭头键将沿着 x–z 平面(地平面)向前、向后、向左和向右移动摄像机。按住鼠标右键可以像在第一人称游戏中一样浏览场景。AWSD 键分别向左、向前、向右和向后移动，移动鼠标控制摄像机(视点)的观察位置。

当你想在场景视图中查看一个特定的游戏对象时，有时最快的方法是在层次视图中选择游戏对象，然后使用编辑菜单中的帧选择菜单项(注意便捷的快捷键 F)。在图 [2-28](#Fig28) 中，我点击了场景 Gizmo 的 x 轴以获得一个水平视图，然后在层次视图中选择玩家游戏对象，并按下 F 键(编辑菜单中所选帧的快捷键)以放大并使玩家在场景视图中居中。

你也可以在场景视图中直接选择一个游戏对象，但是你必须先退出手形工具。正如在层级视图中选择一个游戏对象会导致该选择显示在场景视图和检查器视图中，在场景视图中选择一个游戏对象同样会在检查器视图中显示该选择，并在层级视图中显示为所选的游戏对象。在图 [2-30](#Fig30) 中，当我在玩家上调用帧选择后，我点击了移动工具(在编辑器窗口右上角的手工具按钮的正右边的按钮),然后在场景视图中点击了玩家附近的游戏对象。层级视图自动更新以显示游戏对象被选中，并且游戏对象也显示在检查器视图中。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig30_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig30_HTML.jpg)

图 2-30

在场景视图中选择游戏对象

### 场景视图选项

场景视图顶部的按钮提供了显示选项，有助于您的游戏开发。每个按钮配置一种视图模式。

最左边的按钮设置绘图模式。通常情况下，这种模式设置为纹理化，但如果你想看到所有的多边形，你可以设置为线框(图 [2-31](#Fig31) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig31_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig31_HTML.jpg)

图 2-31

场景视图中的线框显示

“下一步”按钮设置渲染路径，它控制场景是正常着色还是用于诊断。

“渲染路径模式”按钮右侧的三个按钮是简单的切换按钮。当鼠标悬停在它们上面时，它们都会弹出一些鼠标悬停文档(也称为*工具提示*)。

第一个控制场景照明模式。这将在场景视图中使用默认照明方案或游戏中放置的实际灯光之间切换。

中间的按钮切换游戏覆盖模式，天空，镜头眩光和雾效果是否可见。

最后，还有试听模式，可以打开和关闭声音。

### 场景视图小控件

右侧的小控件按钮激活与组件相关联的诊断图形的显示。图 [2-32](#Fig32) 中的场景视图显示了一些小发明。通过单击 gizmos 按钮并检查可用 Gizmos 的列表，您可以看到代表摄像机和灯光的图标。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig32_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig32_HTML.jpg)

图 2-32

场景视图中的小控件

您可以选择和取消选择 Gizmos 窗口中的各种复选框，以关注您感兴趣的对象。左上角的复选框在小控件的 3D 显示和 2D 图标之间切换。相邻的滑块控制 gizmo 的缩放(因此隐藏所有 gizmo 的一个快速方法是将缩放滑块一直拖到最左侧)。

## 游戏视图

现在我们来看看游戏视图。像层级视图和场景视图一样，游戏视图描述当前场景，但不是为了编辑目的。相反，游戏视图是用来玩和调试游戏的。

当你点击 Unity 编辑器窗口顶部的播放按钮时，游戏视图会自动出现。如果当您点按“播放”时没有现有的游戏视图，则会创建一个新的游戏视图。如果游戏视图在编辑器不处于播放模式时是可见的，则它显示游戏的初始状态(即，从初始摄像机位置的有利位置)。

游戏视图显示了游戏在你实际部署时的外观和功能，但可能会与最终构建目标的外观和行为有所不同。一个可能的区别是游戏视图的大小和长宽比。这可以使用视图左上角的菜单进行更改。图 [2-33](#Fig33) 显示了当您从自由宽高比切换到 5:4 宽高比时会发生什么，自由宽高比可根据视图的尺寸进行调整，5:4 宽高比会缩小游戏显示，使其适合该区域并保持所选的宽高比。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig33_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig33_HTML.jpg)

图 2-33

游戏视图

### 最大化播放

当游戏处于播放模式时，点击播放时最大化按钮将导致游戏视图扩展以填充整个编辑器窗口(图 [2-34](#Fig34) )。如果视图与编辑器窗口分离，该按钮将不起作用。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig34_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig34_HTML.jpg)

图 2-34

游戏中最大化的游戏视图

### 统计数据

统计按钮显示关于场景的统计数据(图 [2-35](#Fig35) )，这些数据会随着游戏的运行而更新。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig35_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig35_HTML.jpg)

图 2-35

带统计数据的游戏视图

### 游戏视图小发明

小控件按钮激活与零部件相关联的诊断图形的显示。图 [2-36](#Fig36) 中的游戏视图显示了两个图标，它们是音频源的小发明。gizmo 按钮右侧的列表允许您选择要显示的 gizmo。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig36_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig36_HTML.jpg)

图 2-36

带小发明的游戏视图

游戏视图和场景视图都是对当前场景的描述。Unity 项目由一个或多个场景组成，Unity 编辑器一次只打开一个场景。把项目想象成一个游戏，把场景想象成关卡(事实上，一些对场景进行操作的 Unity 脚本函数在名字中使用了“关卡”)。Unity 游戏对象通过附加组件变得有趣，每个组件提供一些特定的信息或行为。这就是检查员视图的用武之地。如果您在层级视图或场景视图中选择游戏对象，检查器视图将显示其附加组件。

## 控制台视图

所有预设布局中剩下的视图，控制台视图，很容易被忽略，但它非常有用(图 [2-37](#Fig37) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig37_HTML.png](img/460089_1_En_2_Chapter/460089_1_En_2_Fig37_HTML.png)

图 2-37

控制台视图

信息、警告和错误消息出现在控制台视图中。错误以红色显示，警告以黄色显示，信息性消息以白色显示。从列表中选择一条消息会在下方区域显示更多详细信息。此外，Unity 编辑器底部的单行区域显示最新的控制台消息，因此即使控制台视图不可见，您也可以随时看到已记录的消息。

### 小费

警告信息很容易被忽略，但是你可以冒险忽略它们。他们在那里是有原因的，通常表明有些事情必须解决。如果你让警告越积越多，当一个真正重要的警告出现时，你很难注意到。

控制台会很快变得混乱。您可以使用控制台视图顶部最左边的三个按钮来管理这种混乱。清除切换按钮删除所有消息。折叠切换按钮组合了相似的消息。每次编辑器进入播放模式时,“播放时清除”开关将删除所有消息。

错误暂停按钮将导致编辑器在出现错误消息时暂停，特别是当脚本调用 Log.LogError 时。

在编辑器中操作时，日志消息最终会出现在编辑器日志中，而从 Unity 构建的可执行文件中生成的消息会被定向到播放器日志中。从视图菜单中选择打开玩家日志或打开编辑器日志(单击控制台视图右上角的小图标)将会以文本文件或控制台应用程序的形式显示这些日志(图 [2-38](#Fig38) )。

![img/460089_1_En_2_Chapter/460089_1_En_2_Fig38_HTML.jpg](img/460089_1_En_2_Chapter/460089_1_En_2_Fig38_HTML.jpg)

图 2-38

Mac 控制台应用程序中的 Unity 日志

## 进一步探索

我们的团结之旅已经接近尾声。在第 [3](3.html) 章，你将开始学习 ARKit 的一些特性。这是真正开始使用 Unity 的第一章。你还没有开始构建你自己的场景(这将在第三章[开始)，但是你已经能够熟悉 Unity 编辑器了。有很多官方的 Unity 资源对我将要讨论的主题进行了扩展。](3.html)

### 统一手册

正如你所看到的，有很多 Unity 用户界面，我们几乎没有涵盖所有。这是认真阅读 Unity 手册的好时机，无论是在 Unity 编辑器(欢迎屏幕或帮助菜单)中，还是在 Unity 网站( [`http://unity3d.com/`](http://unity3d.com/) )的“文档”部分的“学习”选项卡下。当你想在没有 Unity 编辑器的情况下查找一些东西或者只是阅读关于 Unity 的内容时，网页版非常方便。

本章涵盖的大部分内容与 Unity 手册的 Unity 基础部分的主题相匹配，尤其是关于“学习界面”、“定制您的工作空间”、“发布版本”和“Unity 热键”的部分我们确实跳到了 Unity 手册的高级部分，并提到了 Unity 对版本控制的支持。Unity 手册的“在 Unity 中使用外部版本控制”一页对此有更深入的介绍

### 教程

除了“文档”部分，Unity 网站上的“学习”标签还包括一个“教程”部分，该部分提供了大量的初级编辑视频。顾名思义，这些视频介绍了 Unity 编辑器，事实上，这组视频涵盖了本章讨论的大部分内容，包括最重要的视图(游戏视图、场景视图、层级视图、检查员视图和项目视图)的描述，甚至是发布构建的过程。

### 版本控制

虽然我只是简单地讨论了版本控制，但是在解释如何移除元文件的上下文中，这个主题值得再讨论一下，因为版本控制系统(或 VCS)对于软件开发是如此重要(当您第一次丢失项目或不记得做了什么破坏了游戏时，您会意识到这一点！).如果你已经有了一个最喜欢的 VCS，你可能想和 Unity 一起使用，如果你还没有用过，你可能想考虑保留你的项目的旧版本以防你需要回滚，有能力检查版本之间的差异，

在版本控制系统中，Perforce 是游戏工作室中常用的商业工具，Subversion (svn)作为开源选项有着悠久的历史。如今，像 Git 和 Mercurial 这样的分布式版本控制系统已经成为趋势。我在 Bitbucket ( [`http://bitbucket.com/`](http://bitbucket.com/) )上使用 Mercurial 进行我的内部项目，并在 GitHub 上发布公共项目，包括这本书的项目。

说 Unity VCS 支持是产品不可知的，实际上是另一种说法，Unity 没有任何特定的版本控制系统集成到 Unity 编辑器中。图元文件和 Unity Pro 用户的 YAML 场景文件只是提供了与面向文本的版本控制系统更好的兼容性，这些版本控制系统通常用于源代码。你还是得在联合之外亲自管理 VCS 的业务。你可以顺便在 [`http://yaml.org/`](http://yaml.org/) 上了解更多关于 YAML 的信息。

我发现使用 GitHub 网站上提供的 Mac GitHub 应用程序很方便，类似的 BitBucket source tree 也可以在该网站上找到。